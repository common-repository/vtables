import{j as te,i as fe,k as Z,c as F,h,l as ze,g as ce,m as Ge,n as Ke,r as x,w as Be,I as Qe,Q as Re,J as Je,K as Xe,L as ae,x as $,M as O,f as l,N as re,O as U,z as u,F as ue,P as m,R as se,S as k,U as B,V as Ve,W as Ye,X as Ze,Y as ea,Z as aa,$ as ta,a0 as la,p as oa,a1 as sa,A as na,d as ra,a2 as ua,a3 as me,a4 as ge,a5 as ia,y as V,a6 as be,a7 as L,a8 as De,a9 as oe,aa as da,ab as Ee,_ as ca,ac as pa,ad as va,t as _a,ae as fa,af as ie,ag as ma,ah as ga,o as ba,ai as ha,aj as ya}from"./index.ac51e706.js";import{u as wa,a as qa,Q as ka,b as ye,C as de,c as $a,d as xa,e as Fa,f as Ca,h as Se,g as Le,i as Sa,j as Ua,k as Ue,l as Pa,p as Ta,I as za,m as Ba,n as Qa,o as Ra,q as Va,r as ve,s as Da,t as _e,F as Ea,D as La,v as Aa,w as ja,x as Pe,y as W,z as ne}from"./sizeHelper.33bfe131.js";import{u as we}from"./vue-i18n.runtime.esm-bundler.29876d04.js";import{b as Ia}from"./wpapi.af2b6423.js";import"./index.c237b8e8.js";import"./QResizeObserver.22364463.js";var Na=te({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(a,{slots:r}){const{proxy:{$q:e}}=ce(),p=fe(Ge,Z);if(p===Z)return console.error("QPage needs to be a deep child of QLayout"),Z;if(fe(Ke,Z)===Z)return console.error("QPage needs to be child of QPageContainer"),Z;const f=F(()=>{const _=(p.header.space===!0?p.header.size:0)+(p.footer.space===!0?p.footer.size:0);if(typeof a.styleFn=="function"){const y=p.isContainer.value===!0?p.containerHeight.value:e.screen.height;return a.styleFn(_,y)}return{minHeight:p.isContainer.value===!0?p.containerHeight.value-_+"px":e.screen.height===0?_!==0?`calc(100vh - ${_}px)`:"100vh":e.screen.height-_+"px"}}),i=F(()=>`q-page${a.padding===!0?" q-layout-padding":""}`);return()=>h("main",{class:i.value,style:f.value},ze(r.default))}}),Ae=te({name:"QPopupProxy",props:{...wa,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(a,{slots:r,emit:e,attrs:p}){const{proxy:v}=ce(),{$q:f}=v,i=x(!1),_=x(null),y=F(()=>parseInt(a.breakpoint,10)),{canShow:T}=qa({showing:i});function Q(){return f.screen.width<y.value||f.screen.height<y.value?"dialog":"menu"}const C=x(Q()),P=F(()=>C.value==="menu"?{maxHeight:"99vh"}:{});Be(()=>Q(),o=>{i.value!==!0&&(C.value=o)});function t(o){i.value=!0,e("show",o)}function c(o){i.value=!1,C.value=Q(),e("hide",o)}return Object.assign(v,{show(o){T(o)===!0&&_.value.show(o)},hide(o){_.value.hide(o)},toggle(o){_.value.toggle(o)}}),Qe(v,"currentComponent",()=>({type:C.value,ref:_.value})),()=>{const o={ref:_,...P.value,...p,onShow:t,onHide:c};let S;return C.value==="dialog"?S=Re:(S=ka,Object.assign(o,{target:a.target,contextMenu:a.contextMenu,noParentEvent:!0,separateClosePopup:!0})),h(S,o,r.default)}}});function Oa(a){const r=document.createElement("textarea");r.value=a,r.contentEditable="true",r.style.position="fixed";const e=()=>{};Je(e),document.body.appendChild(r),r.focus(),r.select();const p=document.execCommand("copy");return r.remove(),Xe(e),p}function Ma(a){return navigator.clipboard!==void 0?navigator.clipboard.writeText(a):new Promise((r,e)=>{const p=Oa(a);p?r(!0):e(p)})}const Ha={class:"flex justify-between full-width"},Wa=ae({__name:"DashboardActions",props:{loading:{type:Boolean},trProps:{}},emits:["selectTable","deleteTable"],setup(a){return(r,e)=>($(),O(ue,null,[l(U,{class:"q-px-sm",icon:"tune",color:"blue-grey",title:r.$t("settings"),flat:"",onClick:e[0]||(e[0]=re(p=>r.$emit("selectTable",r.trProps.props.row),["stop"]))},null,8,["title"]),l(U,{class:"q-px-sm",icon:"delete_outline",color:"blue-grey",title:r.$t("delete"),disable:r.loading,flat:"",onClick:e[2]||(e[2]=re(()=>{},["stop"]))},{default:u(()=>[l(Ae,{style:{width:"300px"}},{default:u(()=>[l(ye,{class:"text-white bg-red"},{action:u(()=>[m("div",Ha,[se(l(U,{flat:"",label:r.$t("cancel"),size:"sm"},null,8,["label"]),[[de]]),se(l(U,{outline:"",label:r.$t("confirm"),size:"sm",onClick:e[1]||(e[1]=p=>r.$emit("deleteTable",r.trProps.props.row.id))},null,8,["label"]),[[de]])])]),default:u(()=>[m("b",null,k(r.$t("delete")),1),B(" "+k(r.trProps.props.row.title)+" "+k(r.$t("table"))+"? ",1)]),_:1})]),_:1})]),_:1},8,["title","disable"])],64))}});var Ga=te({name:"QUploaderAddTrigger",setup(){const a=fe(Ve,Z);return a===Z&&console.error("QUploaderAddTrigger needs to be child of QUploader"),a}});const Ka={...Ye,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:a=>a>=0&&a<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},he=50,je=2*he,Ie=je*Math.PI,Ja=Math.round(Ie*1e3)/1e3;var Xa=te({name:"QCircularProgress",props:{...Ka,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(a,{slots:r}){const{proxy:{$q:e}}=ce(),p=Ze(a),v=F(()=>{const P=(e.lang.rtl===!0?-1:1)*a.angle;return{transform:a.reverse!==(e.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-P}deg)`:`rotate3d(0, 0, 1, ${P-90}deg)`}}),f=F(()=>a.instantFeedback!==!0&&a.indeterminate!==!0?{transition:`stroke-dashoffset ${a.animationSpeed}ms ease 0s, stroke ${a.animationSpeed}ms ease`}:""),i=F(()=>je/(1-a.thickness/2)),_=F(()=>`${i.value/2} ${i.value/2} ${i.value} ${i.value}`),y=F(()=>$a(a.value,a.min,a.max)),T=F(()=>Ie*(1-(y.value-a.min)/(a.max-a.min))),Q=F(()=>a.thickness/2*i.value);function C({thickness:P,offset:t,color:c,cls:o,rounded:S}){return h("circle",{class:"q-circular-progress__"+o+(c!==void 0?` text-${c}`:""),style:f.value,fill:"transparent",stroke:"currentColor","stroke-width":P,"stroke-dasharray":Ja,"stroke-dashoffset":t,"stroke-linecap":S,cx:i.value,cy:i.value,r:he})}return()=>{const P=[];a.centerColor!==void 0&&a.centerColor!=="transparent"&&P.push(h("circle",{class:`q-circular-progress__center text-${a.centerColor}`,fill:"currentColor",r:he-Q.value/2,cx:i.value,cy:i.value})),a.trackColor!==void 0&&a.trackColor!=="transparent"&&P.push(C({cls:"track",thickness:Q.value,offset:0,color:a.trackColor})),P.push(C({cls:"circle",thickness:Q.value,offset:T.value,color:a.color,rounded:a.rounded===!0?"round":void 0}));const t=[h("svg",{class:"q-circular-progress__svg",style:v.value,viewBox:_.value,"aria-hidden":"true"},P)];return a.showValue===!0&&t.push(h("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:a.fontSize}},r.default!==void 0?r.default():[h("div",y.value)])),h("div",{class:`q-circular-progress q-circular-progress--${a.indeterminate===!0?"in":""}determinate`,style:p.value,role:"progressbar","aria-valuemin":a.min,"aria-valuemax":a.max,"aria-valuenow":a.indeterminate===!0?void 0:y.value},ea(r.internal,t))}}});function Te(a){return(a*100).toFixed(2)+"%"}const Ya={...aa,...xa,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},Ne=[...Fa,"start","finish","added","removed"];function Za(a){const r=ce(),{props:e,slots:p,emit:v,proxy:f}=r,{$q:i}=f,_=ta(e,i);function y(s,q,D){if(s.__status=q,q==="idle"){s.__uploaded=0,s.__progress=0,s.__sizeLabel=Se(s.size),s.__progressLabel="0.00%";return}if(q==="failed"){f.$forceUpdate();return}s.__uploaded=q==="uploaded"?s.size:D,s.__progress=q==="uploaded"?1:Math.min(.9999,s.__uploaded/s.size),s.__progressLabel=Te(s.__progress),f.$forceUpdate()}const T=F(()=>e.disable!==!0&&e.readonly!==!0),Q=x(!1),C=x(null),P=x(null),t={files:x([]),queuedFiles:x([]),uploadedFiles:x([]),uploadedSize:x(0),updateFileStatus:y,isAlive:()=>la(r)===!1},{pickFiles:c,addFiles:o,onDragover:S,onDragleave:d,processFiles:w,getDndNode:K,maxFilesNumber:M,maxTotalSizeNumber:J}=Ca({editable:T,dnd:Q,getFileInput:$e,addFilesToQueue:xe});Object.assign(t,a({props:e,slots:p,emit:v,helpers:t})),t.isBusy===void 0&&(t.isBusy=x(!1));const R=x(0),A=F(()=>R.value===0?0:t.uploadedSize.value/R.value),N=F(()=>Te(A.value)),I=F(()=>Se(R.value)),g=F(()=>T.value===!0&&t.isUploading.value!==!0&&(e.multiple===!0||t.queuedFiles.value.length===0)&&(e.maxFiles===void 0||t.files.value.length<M.value)&&(e.maxTotalSize===void 0||R.value<J.value)),b=F(()=>T.value===!0&&t.isBusy.value!==!0&&t.isUploading.value!==!0&&t.queuedFiles.value.length!==0);oa(Ve,Fe);const n=F(()=>"q-uploader column no-wrap"+(_.value===!0?" q-uploader--dark q-dark":"")+(e.bordered===!0?" q-uploader--bordered":"")+(e.square===!0?" q-uploader--square no-border-radius":"")+(e.flat===!0?" q-uploader--flat no-shadow":"")+(e.disable===!0?" disabled q-uploader--disable":"")+(Q.value===!0?" q-uploader--dnd":"")),z=F(()=>"q-uploader__header"+(e.color!==void 0?` bg-${e.color}`:"")+(e.textColor!==void 0?` text-${e.textColor}`:""));Be(t.isUploading,(s,q)=>{q===!1&&s===!0?v("start"):q===!0&&s===!1&&v("finish")});function X(){e.disable===!1&&(t.abort(),t.uploadedSize.value=0,R.value=0,ke(),t.files.value=[],t.queuedFiles.value=[],t.uploadedFiles.value=[])}function Y(){e.disable===!1&&pe(["uploaded"],()=>{t.uploadedFiles.value=[]})}function j(){pe(["idle","failed"],({size:s})=>{R.value-=s,t.queuedFiles.value=[]})}function pe(s,q){if(e.disable===!0)return;const D={files:[],size:0},H=t.files.value.filter(E=>s.indexOf(E.__status)===-1?!0:(D.size+=E.size,D.files.push(E),E.__img!==void 0&&window.URL.revokeObjectURL(E.__img.src),!1));D.files.length!==0&&(t.files.value=H,q(D),v("removed",D.files))}function qe(s){e.disable||(s.__status==="uploaded"?t.uploadedFiles.value=t.uploadedFiles.value.filter(q=>q.__key!==s.__key):s.__status==="uploading"?s.__abort():R.value-=s.size,t.files.value=t.files.value.filter(q=>q.__key!==s.__key?!0:(q.__img!==void 0&&window.URL.revokeObjectURL(q.__img.src),!1)),t.queuedFiles.value=t.queuedFiles.value.filter(q=>q.__key!==s.__key),v("removed",[s]))}function ke(){t.files.value.forEach(s=>{s.__img!==void 0&&window.URL.revokeObjectURL(s.__img.src)})}function $e(){return P.value||C.value.getElementsByClassName("q-uploader__input")[0]}function xe(s,q){const D=w(s,q,t.files.value,!0),H=$e();H!=null&&(H.value=""),D!==void 0&&(D.forEach(E=>{if(t.updateFileStatus(E,"idle"),R.value+=E.size,e.noThumbnails!==!0&&E.type.toUpperCase().startsWith("IMAGE")){const Ce=new Image;Ce.src=window.URL.createObjectURL(E),E.__img=Ce}}),t.files.value=t.files.value.concat(D),t.queuedFiles.value=t.queuedFiles.value.concat(D),v("added",D),e.autoUpload===!0&&t.upload())}function Me(){b.value===!0&&t.upload()}function le(s,q,D){if(s===!0){const H={type:"a",key:q,icon:i.iconSet.uploader[q],flat:!0,dense:!0};let E;return q==="add"?(H.onClick=c,E=Fe):H.onClick=D,h(U,H,E)}}function Fe(){return h("input",{ref:P,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:e.accept,multiple:e.multiple===!0?"multiple":void 0,capture:e.capture,onMousedown:sa,onClick:c,onChange:xe})}function He(){return p.header!==void 0?p.header(ee):[h("div",{class:"q-uploader__header-content column"},[h("div",{class:"flex flex-center no-wrap q-gutter-xs"},[le(t.queuedFiles.value.length!==0,"removeQueue",j),le(t.uploadedFiles.value.length!==0,"removeUploaded",Y),t.isUploading.value===!0?h(me,{class:"q-uploader__spinner"}):null,h("div",{class:"col column justify-center"},[e.label!==void 0?h("div",{class:"q-uploader__title"},[e.label]):null,h("div",{class:"q-uploader__subtitle"},[I.value+" / "+N.value])]),le(g.value,"add"),le(e.hideUploadBtn===!1&&b.value===!0,"upload",t.upload),le(t.isUploading.value,"clear",t.abort)])])]}function We(){return p.list!==void 0?p.list(ee):t.files.value.map(s=>h("div",{key:s.__key,class:"q-uploader__file relative-position"+(e.noThumbnails!==!0&&s.__img!==void 0?" q-uploader__file--img":"")+(s.__status==="failed"?" q-uploader__file--failed":s.__status==="uploaded"?" q-uploader__file--uploaded":""),style:e.noThumbnails!==!0&&s.__img!==void 0?{backgroundImage:'url("'+s.__img.src+'")'}:null},[h("div",{class:"q-uploader__file-header row flex-center no-wrap"},[s.__status==="failed"?h(ge,{class:"q-uploader__file-status",name:i.iconSet.type.negative,color:"negative"}):null,h("div",{class:"q-uploader__file-header-content col"},[h("div",{class:"q-uploader__title"},[s.name]),h("div",{class:"q-uploader__subtitle row items-center no-wrap"},[s.__sizeLabel+" / "+s.__progressLabel])]),s.__status==="uploading"?h(Xa,{value:s.__progress,min:0,max:1,indeterminate:s.__progress===0}):h(U,{round:!0,dense:!0,flat:!0,icon:i.iconSet.uploader[s.__status==="uploaded"?"done":"clear"],onClick:()=>{qe(s)}})])]))}na(()=>{t.isUploading.value===!0&&t.abort(),t.files.value.length!==0&&ke()});const ee={};for(const s in t)ra(t[s])===!0?Qe(ee,s,()=>t[s].value):ee[s]=t[s];return Object.assign(ee,{upload:Me,reset:X,removeUploadedFiles:Y,removeQueuedFiles:j,removeFile:qe,pickFiles:c,addFiles:o}),ua(ee,{canAddFiles:()=>g.value,canUpload:()=>b.value,uploadSizeLabel:()=>I.value,uploadProgressLabel:()=>N.value}),Object.assign(f,ee),()=>{const s=[h("div",{class:z.value},He()),h("div",{class:"q-uploader__list scroll"},We()),K("uploader")];t.isBusy.value===!0&&s.push(h("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[h(me)]));const q={ref:C,class:n.value};return g.value===!0&&Object.assign(q,{onDragover:S,onDragleave:d}),h("div",q,s)}}const et=()=>!0;function at(a){const r={};return a.forEach(e=>{r[e]=et}),r}const tt=at(Ne);var lt=({name:a,props:r,emits:e,injectPlugin:p})=>te({name:a,props:{...Ya,...r},emits:ia(e)===!0?{...tt,...e}:[...Ne,...e],setup(){return Za(p)}});function G(a){return typeof a=="function"?a:()=>a}const ot={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>a=>a.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},st=["factoryFailed","uploaded","failed","uploading"];function nt({props:a,emit:r,helpers:e}){const p=x([]),v=x([]),f=x(0),i=F(()=>({url:G(a.url),method:G(a.method),headers:G(a.headers),formFields:G(a.formFields),fieldName:G(a.fieldName),withCredentials:G(a.withCredentials),sendRaw:G(a.sendRaw),batch:G(a.batch)})),_=F(()=>f.value>0),y=F(()=>v.value.length!==0);let T;function Q(){p.value.forEach(c=>{c.abort()}),v.value.length!==0&&(T=!0)}function C(){const c=e.queuedFiles.value.slice(0);e.queuedFiles.value=[],i.value.batch(c)?P(c):c.forEach(o=>{P([o])})}function P(c){if(f.value++,typeof a.factory!="function"){t(c,{});return}const o=a.factory(c);if(!o)r("factoryFailed",new Error("QUploader: factory() does not return properly"),c),f.value--;else if(typeof o.catch=="function"&&typeof o.then=="function"){v.value.push(o);const S=d=>{e.isAlive()===!0&&(v.value=v.value.filter(w=>w!==o),v.value.length===0&&(T=!1),e.queuedFiles.value=e.queuedFiles.value.concat(c),c.forEach(w=>{e.updateFileStatus(w,"failed")}),r("factoryFailed",d,c),f.value--)};o.then(d=>{T===!0?S(new Error("Aborted")):e.isAlive()===!0&&(v.value=v.value.filter(w=>w!==o),t(c,d))}).catch(S)}else t(c,o||{})}function t(c,o){const S=new FormData,d=new XMLHttpRequest,w=(n,z)=>o[n]!==void 0?G(o[n])(z):i.value[n](z),K=w("url",c);if(!K){console.error("q-uploader: invalid or no URL specified"),f.value--;return}const M=w("formFields",c);M!==void 0&&M.forEach(n=>{S.append(n.name,n.value)});let J=0,R=0,A=0,N=0,I;d.upload.addEventListener("progress",n=>{if(I===!0)return;const z=Math.min(N,n.loaded);e.uploadedSize.value+=z-A,A=z;let X=A-R;for(let Y=J;X>0&&Y<c.length;Y++){const j=c[Y];if(X>j.size)X-=j.size,J++,R+=j.size,e.updateFileStatus(j,"uploading",j.size);else{e.updateFileStatus(j,"uploading",X);return}}},!1),d.onreadystatechange=()=>{d.readyState<4||(d.status&&d.status<400?(e.uploadedFiles.value=e.uploadedFiles.value.concat(c),c.forEach(n=>{e.updateFileStatus(n,"uploaded")}),r("uploaded",{files:c,xhr:d})):(I=!0,e.uploadedSize.value-=A,e.queuedFiles.value=e.queuedFiles.value.concat(c),c.forEach(n=>{e.updateFileStatus(n,"failed")}),r("failed",{files:c,xhr:d})),f.value--,p.value=p.value.filter(n=>n!==d))},d.open(w("method",c),K),w("withCredentials",c)===!0&&(d.withCredentials=!0);const g=w("headers",c);g!==void 0&&g.forEach(n=>{d.setRequestHeader(n.name,n.value)});const b=w("sendRaw",c);c.forEach(n=>{e.updateFileStatus(n,"uploading",0),b!==!0&&S.append(w("fieldName",n),n,n.name),n.xhr=d,n.__abort=()=>{d.abort()},N+=n.size}),r("uploading",{files:c,xhr:d}),p.value.push(d),b===!0?d.send(new Blob(c)):d.send(S)}return{isUploading:_,isBusy:y,abort:Q,upload:C}}var rt={name:"QUploader",props:ot,emits:st,injectPlugin:nt},ut=lt(rt);const it={class:"wrap | col q-ma-none relative-position"},dt={class:"row no-wrap items-center q-pa-sm q-gutter-xs"},ct={class:"col"},pt={class:"q-uploader__subtitle"},vt={class:"q-pl-xs"},_t={class:"inner"},ft={class:"block q-my-sm text-grey-5 text-uppercase"},mt={class:"q-pl-xs"},gt={class:"text-caption text-grey-7 q-px-xl"},bt=ae({__name:"DashboardUploaderLocal",emits:["upload","close"],setup(a,{emit:r}){const p=Le()[Sa],{t:v}=we(),f=Ua(),i=x(0),_=x(null);function y(o){return new Promise((S,d)=>{const w=new FileReader;w.onload=()=>S(w.result),w.onerror=d,w.readAsText(o)})}async function T(o){var I,g;const S=await y(o[0]);if(!S){f.notify({type:"negative",message:v("messages.something_went_wrong"),caption:v("messages.please_make_sure_the_file_is_valid")});return}const d=S,w=Pa(d)?"json":"csv",K=o[0].name.replace(/['"]/g,"").replace(`.${w}`,""),M=Ta(d),J=(I=M.columns)==null?void 0:I.map(b=>b.name),R={...za};R.columns.visibleColumns=J||[];const{response:A,error:N}=await p({title:K,fileSize:Ba(o[0].size),source:M,settings:R,tableType:w});if(N){f.notify({type:"negative",message:v("messages.something_went_wrong"),caption:v("messages.please_try_again_later")});return}return r("upload"),{url:`${Ia}vtables/v1/tables/${(g=A.data)==null?void 0:g.id}`,method:"GET"}}function Q(){}function C(){var o;(o=_.value)==null||o.click()}function P(o){i.value=o.length}function t(){i.value-=1}function c(o){o.removeUploadedFiles(),o.removeQueuedFiles(),i.value=0}return(o,S)=>($(),V(be,{class:"full-height",flat:""},{default:u(()=>[l(Ee,{class:"full-height q-pa-none"},{default:u(()=>[m("div",it,[l(L(ut),{class:De(["full-width",{"files-added":i.value}]),factory:T,onFactoryFailed:Q,flat:"",accept:".csv, .json","no-thumbnails":"","auto-upload":"",multiple:"",onAdded:P,onRemoved:t},{header:u(d=>[m("div",dt,[(d.uploadedFiles.length||d.queuedFiles.length)&&!d.isUploading?($(),V(U,{key:0,icon:"done_all",round:"",dense:"",flat:"",onClick:w=>c(d)},{default:u(()=>[l(Ue,null,{default:u(()=>[B(k(o.$t("done")),1)]),_:1})]),_:2},1032,["onClick"])):oe("",!0),d.isUploading?($(),V(me,{key:1,class:"q-uploader__spinner"})):oe("",!0),m("div",ct,[m("div",pt,k(d.uploadSizeLabel),1)]),d.canAddFiles?($(),V(U,{key:2,ref_key:"pickFileBtn",ref:_,class:"invisible q-px-sm",icon:"add_box",color:"white","text-color":"primary",dense:"",onClick:d.pickFiles},{default:u(()=>[l(Ga),m("span",vt,k(o.$t("pick_file")),1)]),_:2},1032,["onClick"])):oe("",!0),d.isUploading?($(),V(U,{key:3,icon:"clear",round:"",dense:"",flat:"",onClick:d.abort},{default:u(()=>[l(Ue,null,{default:u(()=>[B(k(o.$t("abort_upload")),1)]),_:1})]),_:2},1032,["onClick"])):oe("",!0)])]),_:1},8,["class","factory"]),se(m("div",{class:"call-to-action | full-width text-center absolute",onClick:C},[m("div",_t,[B(k(o.$t("messages.drag_and_drop_csv_file_to_upload"))+" ",1),m("span",ft,k(o.$t("or")),1),l(U,{class:"q-px-sm q-mb-md",icon:"add_box",color:"white","text-color":"primary",onClick:C,dense:"",unelevated:""},{default:u(()=>[m("span",mt,k(o.$t("pick_file")),1)]),_:1}),m("div",gt,k(o.$t("messages.please_ensure_you_only_use_alphanumeric_characters_dashes_underscores_spaces_and_parantheses_for_filenames")),1)])],512),[[da,!i.value]])])]),_:1})]),_:1}))}});var ht=te({name:"QToolbar",props:{inset:Boolean},setup(a,{slots:r}){const e=F(()=>"q-toolbar row no-wrap items-center"+(a.inset===!0?" q-toolbar--inset":""));return()=>h("div",{class:e.value,role:"toolbar"},ze(r.default))}});const yt={},wt=a=>(pa("data-v-6f97a5ae"),a=a(),va(),a),qt={class:"limit-plan-message"},kt=wt(()=>m("h6",{class:"text-subtitle1 q-my-md"},[B(" Available with "),m("b",{class:"text-weight-bolder"},"vTables PRO Add-on"),B(". ")],-1));function $t(a,r){return $(),O("div",qt,[l(ye,{class:"bg-amber-9 text-white text-center full-width"},{default:u(()=>[kt,l(U,{class:"text-weight-bold q-mb-md",color:"white","text-color":"primary",href:"https://vtables.pro",target:"_blank"},{default:u(()=>[B(" Download for free ")]),_:1})]),_:1})])}var Oe=ca(yt,[["render",$t],["__scopeId","data-v-6f97a5ae"]]);const xt={class:"google-sheet-importer row q-mb-md"},Ft={class:"col"},Ct={class:"row q-mb-none q-pb-sm items-center text-weight-bold bg-grey-2"},St={class:"col-4 q-pl-sm"},Ut=m("div",{class:"col q-pl-md"},"URL",-1),Pt={class:"col-1 text-right"},Tt={class:"col-4"},zt={class:"col flex items-start no-wrap"},Bt=ae({__name:"DashboardUploaderRemote",setup(a){const e=_a({collection:[{title:"",url:"",uploaded:!1,error:null}]}),p=F(()=>e.collection.every(v=>v.uploaded));return(v,f)=>($(),O("div",null,[l(Oe),m("div",xt,[m("div",Ft,[l(ht,{class:"bg-primary text-white rounded-borders justify-end q-mb-none"},{default:u(()=>[p.value?($(),V(U,{key:0,class:"q-px-sm",icon:"done",label:v.$t("done"),dense:"",color:"white","text-color":"primary"},null,8,["label"])):($(),V(U,{key:1,class:"q-px-sm",icon:"cloud_download",label:v.$t("import"),dense:"",color:"white","text-color":"primary"},null,8,["label"]))]),_:1}),m("div",Ct,[m("div",St,k(v.$t("title")),1),Ut,m("div",Pt,[l(U,{icon:"add_circle_outline",flat:"",round:""})])]),($(!0),O(ue,null,fa(e.collection,(i,_)=>($(),O("div",{key:_,class:"url-input | row q-gutter-sm bg-white q-mb-none"},[m("div",Tt,[l(ie,{modelValue:i.title,"onUpdate:modelValue":y=>i.title=y,"bg-color":i.uploaded?"green-2":"",disable:i.uploaded,placeholder:"Title",type:"text",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue","bg-color","disable"])]),m("div",zt,[l(ie,{modelValue:i.url,"onUpdate:modelValue":y=>i.url=y,modelModifiers:{trim:!0},class:"full-width","bg-color":i.uploaded?"green-2":"",disable:i.uploaded,placeholder:v.$t("messages.paste_a_google_sheet_url"),type:"text",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue","bg-color","disable","placeholder"])])]))),128))])])]))}});const Qt={class:"woo-uploader"},Rt=m("br",null,null,-1),Vt=ae({__name:"DashboardUploaderWoo",setup(a){const{t:r}=we(),e=x(""),p=[{label:r("import_all_products"),value:"all_products"},{label:r("import_products_from_categories"),value:"specific_categories"}],v=x(p[0]);return(f,i)=>($(),O("div",Qt,[l(Oe),l(ie,{modelValue:e.value,"onUpdate:modelValue":i[0]||(i[0]=_=>e.value=_),filled:"",label:f.$t("table_name")},null,8,["modelValue","label"]),Rt,l(Qa,{modelValue:v.value,"onUpdate:modelValue":i[1]||(i[1]=_=>v.value=_),class:"q-mb-md",filled:"",options:[],label:f.$t("i_want_to"),disable:""},null,8,["modelValue","label"]),l(U,{label:f.$t("import"),class:"full-width",color:"primary",icon:"cloud_download",disable:""},null,8,["label"])]))}});const Dt={class:"text-h6 q-ma-none"},Et={class:"q-gutter-y-md"},Lt=ae({__name:"DashboardUploader",props:{show:{type:Boolean}},emits:["close","upload"],setup(a,{emit:r}){const e=a,p=x("csv_json"),v=F({get(){return e.show},set(){f()}});function f(){r("close")}return(i,_)=>($(),V(Re,{modelValue:v.value,"onUpdate:modelValue":_[4]||(_[4]=y=>v.value=y)},{default:u(()=>[l(be,{class:"uploader-popup"},{default:u(()=>[l(Ee,{class:"bg-grey-3"},{default:u(()=>[se(l(U,{class:"absolute-right",flat:"",icon:"close"},null,512),[[de]]),m("h6",Dt,k(i.$t("upload")),1)]),_:1}),m("div",Et,[l(be,null,{default:u(()=>[l(Ra,{"model-value":20,style:{height:"400px"}},{before:u(()=>[l(Va,{modelValue:p.value,"onUpdate:modelValue":_[0]||(_[0]=y=>p.value=y),dense:"",class:"text-grey bg-grey-2 text-left","active-color":"primary","indicator-color":"primary",vertical:""},{default:u(()=>[l(ve,{name:"csv_json",label:"CSV / JSON"}),l(ve,{name:"google_sheets",label:"Google Sheets"}),l(ve,{name:"woocommerce",label:"Woo Products"})]),_:1},8,["modelValue"])]),after:u(()=>[l(Da,{modelValue:p.value,"onUpdate:modelValue":_[3]||(_[3]=y=>p.value=y),class:"full-height",vertical:""},{default:u(()=>[l(_e,{name:"csv_json"},{default:u(()=>[l(bt,{onUpload:_[1]||(_[1]=y=>i.$emit("upload")),onClose:_[2]||(_[2]=y=>i.$emit("close"))})]),_:1}),l(_e,{name:"google_sheets"},{default:u(()=>[l(Bt)]),_:1}),l(_e,{name:"woocommerce"},{default:u(()=>[l(Vt)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1})]),_:1},8,["modelValue"]))}});const At={class:"q-pl-xs"},jt={class:"row"},It={class:"col"},Nt={class:"text-h6"},Ot={class:"flex justify-between full-width"},Mt={key:0,class:"q-py-md text-center"},Ht={class:"block q-mb-sm text-h6"},Wt={key:1,class:"q-py-md text-center"},Gt={class:"block q-mb-sm text-h6"},Kt={class:"q-pl-xs"},Jt={class:"ellipsis",style:{width:"250px"}},Xt=ae({__name:"DashboardTables",setup(a,{expose:r}){r({showUploaderPopup:N});const e=Le(),p=e[Ea],v=e[La],{loading:f,tables:i,totalPerQuery:_,totalInDb:y,copiedShortcode:T,selectedTable:Q}=ma(e),{t:C}=we(),P=ga(),t=x(!1),c=x([]),o=x(""),S=Aa("recordsPerPage",5),d=x({sortBy:"created_at",descending:!0,page:1,rowsPerPage:S.value,rowsNumber:0,search:""}),w=x(null);ba(async()=>{await A()});const K=[{name:"title",align:"left",label:C("title"),field:"title",sortable:!0},{name:"external_source",align:"left",label:C("source"),field:"external_source",sortable:!0},{name:"shortcode",align:"left",label:C("shortcode"),field:"shortcode",sortable:!1},{name:"file_size",align:"left",label:C("filesize"),field:"file_size",sortable:!0},{name:"created_at",align:"left",label:C("uploaded"),field:"created_at",sortable:!0},{name:"updated_at",align:"left",label:C("modified"),field:"updated_at",sortable:!0},{name:"actions",align:"center",label:C("actions"),field:"actions"}];async function M(){var b;(b=w.value)==null||b.hide();const g=c.value.map(n=>v(n.id));f.value=!0,await Promise.all(g),await A(),f.value=!1,c.value=[]}async function J(g){T.value=g,await Ma(g)}async function R(g){var j;const{page:b,rowsPerPage:n,sortBy:z,descending:X}=(j=g.pagination)!=null?j:{},Y=g.filter;b&&(d.value.page=b),n&&(S.value=n,d.value.rowsPerPage=S.value),d.value.sortBy=z,d.value.descending=X,d.value.search=Y,await A()}async function A(){f.value=!0,await p({page:d.value.page,perPage:d.value.rowsPerPage,search:d.value.search,order:d.value.descending?"DESC":"ASC",orderby:d.value.sortBy}),f.value=!1,d.value.rowsNumber=_.value}function N(){t.value=!0}function I(g){Q.value=g,P.push(`/table/${g.id}`)}return(g,b)=>($(),O(ue,null,[m("div",{class:De(["text-right",{invisible:!L(y)}])},[l(U,{icon:"add_box",color:"primary",onClick:b[0]||(b[0]=n=>t.value=!0)},{default:u(()=>[m("span",At,k(g.$t("add_table")),1)]),_:1})],2),m("div",jt,[m("div",It,[l(ja,{class:"q-mt-md",pagination:d.value,"onUpdate:pagination":b[5]||(b[5]=n=>d.value=n),selected:c.value,"onUpdate:selected":b[6]||(b[6]=n=>c.value=n),selection:L(i).length?"multiple":"none",loading:L(f),rows:L(i),columns:K,filter:o.value,"hide-bottom":!L(i).length,"rows-per-page-options":[5,10,25,50],"row-key":"id",flat:"",onRequest:R},ha({"top-left":u(()=>[m("span",Nt,k(g.$t("tables")),1),c.value.length?($(),V(U,{key:0,class:"q-ml-md",loading:L(f),disable:L(f),icon:"delete",color:"negative",outline:"",dense:""},{default:u(()=>[B(k(g.$t("remove_selected"))+" ",1),l(Ae,{ref_key:"proxy",ref:w,style:{width:"300px"}},{default:u(()=>[l(ye,{class:"text-white bg-red"},{action:u(()=>[m("div",Ot,[se(l(U,{flat:"",label:g.$t("cancel"),size:"sm"},null,8,["label"]),[[de]]),l(U,{outline:"",label:g.$t("confirm"),size:"sm",onClick:b[1]||(b[1]=n=>M())},null,8,["label"])])]),default:u(()=>[m("b",null,k(g.$t("remove")),1),B(" "+k(g.$t("messages.all_selected_tables"))+"? ",1)]),_:1})]),_:1},512)]),_:1},8,["loading","disable"])):oe("",!0)]),"top-right":u(()=>[l(ie,{modelValue:o.value,"onUpdate:modelValue":b[3]||(b[3]=n=>o.value=n),"input-class":"search-input",outlined:"",dense:"",debounce:"500",placeholder:g.$t("search_by_title")},{append:u(()=>[o.value?($(),V(ge,{key:0,name:"cancel",class:"cursor-pointer z-top",onClick:b[2]||(b[2]=re(n=>o.value="",["stop","prevent"]))})):($(),V(ge,{key:1,name:"search"}))]),_:1},8,["modelValue","placeholder"])]),body:u(n=>[l(Pe,{class:"cursor-pointer",props:n,onClick:z=>I(n.row)},{default:u(()=>[l(W,null,{default:u(()=>[l(ya,{modelValue:n.selected,"onUpdate:modelValue":z=>n.selected=z},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(W,null,{default:u(()=>[m("div",Jt,k(n.row.title),1)]),_:2},1024),l(W,null,{default:u(()=>[n.row.table_type?($(),O(ue,{key:0},[n.row.table_type==="local"?($(),V(ne,{key:0,dense:"",square:""},{default:u(()=>[B(" csv ")]),_:1})):n.row.table_type==="remote"?($(),V(ne,{key:1,dense:"",square:""},{default:u(()=>[B(" google sheets ")]),_:1})):($(),V(ne,{key:2,class:"text-lowercase",dense:"",square:""},{default:u(()=>{var z;return[B(k((z=n.row.table_type)==null?void 0:z.replace("_"," ")),1)]}),_:2},1024))],64)):($(),V(ne,{key:1,class:"text-lowercase",dense:"",square:""},{default:u(()=>[B(" csv ")]),_:1}))]),_:2},1024),l(W,null,{default:u(()=>[B(k(n.row.shortcode)+" ",1),l(U,{color:"grey",flat:"",round:"",size:"sm",title:"Copy",icon:L(T)===n.row.shortcode?"check":"content_copy",onClick:re(z=>J(n.row.shortcode),["stop"]),onFocusout:b[4]||(b[4]=z=>T.value="")},null,8,["icon","onClick"])]),_:2},1024),l(W,null,{default:u(()=>[B(k(n.row.file_size),1)]),_:2},1024),l(W,null,{default:u(()=>[B(k(n.row.created_at),1)]),_:2},1024),l(W,null,{default:u(()=>[B(k(n.row.updated_at),1)]),_:2},1024),l(W,null,{default:u(()=>[l(Wa,{loading:L(f),"tr-props":{props:n},onSelectTable:I,onDeleteTable:L(v)},null,8,["loading","tr-props","onDeleteTable"])]),_:2},1024)]),_:2},1032,["props","onClick"])]),_:2},[!L(i).length&&!L(f)?{name:"top-row",fn:u(()=>[l(Pe,null,{default:u(()=>[l(W,{colspan:"8"},{default:u(()=>[L(y)?($(),O("div",Mt,[m("span",Ht,k(g.$t("nothing_found"))+". ",1)])):($(),O("div",Wt,[m("span",Gt,k(g.$t("messages.add_your_first_table")),1),l(U,{icon:"add_box",color:"primary",onClick:N},{default:u(()=>[m("span",Kt,k(g.$t("add_table")),1)]),_:1})]))]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["pagination","selected","selection","loading","rows","filter","hide-bottom"])])]),l(Lt,{show:t.value,onClose:b[7]||(b[7]=n=>t.value=!1),onUpload:A},null,8,["show"])],64))}}),ol=ae({__name:"DashboardPage",setup(a){return(r,e)=>($(),V(Na,{class:"q-mr-md q-mt-md"},{default:u(()=>[l(Xt)]),_:1}))}});export{ol as default};
